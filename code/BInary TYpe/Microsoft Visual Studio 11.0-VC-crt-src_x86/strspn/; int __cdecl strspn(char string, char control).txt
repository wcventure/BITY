; int __cdecl strspn(char string, char control)
strspn@@YAHPAD0@Z proc near            ; CODE XREF _main+1Fp

var_68          = dword ptr -68h
count           = dword ptr -24h
map             = byte ptr -20h
string          = dword ptr  8
control         = dword ptr  0Ch

                push    ebp
                mov     ebp, esp
                sub     esp, 68h
                push    ebx
                push    esi
                push    edi
                mov     [ebp+count], 0
                jmp     short loc_40101B
; ---------------------------------------------------------------------------

loc_401012                             ; CODE XREF strspn(char ,char )+3Cj
                mov     eax, [ebp+count]
                add     eax, 1
                mov     [ebp+count], eax

loc_40101B                             ; CODE XREF strspn(char ,char )+10j
                cmp     [ebp+count], 20h
                jge     short loc_40103E
                mov     eax, [ebp+count]
                mov     [ebp+var_68], eax
                cmp     [ebp+var_68], 20h
                jnb     short loc_40102F
                jmp     short loc_401034
; ---------------------------------------------------------------------------

loc_40102F                             ; CODE XREF strspn(char ,char )+2Bj
                call    ___report_rangecheckfailure

loc_401034                             ; CODE XREF strspn(char ,char )+2Dj
                mov     ecx, [ebp+var_68]
                mov     [ebp+ecx+map], 0
                jmp     short loc_401012
; ---------------------------------------------------------------------------

loc_40103E                             ; CODE XREF strspn(char ,char )+1Fj
                                        ; strspn(char ,char )+7Ej
                mov     eax, [ebp+control]
                movsx   ecx, byte ptr [eax]
                test    ecx, ecx
                jz      short loc_401080
                mov     eax, [ebp+control]
                movsx   edx, byte ptr [eax]
                sar     edx, 3
                mov     eax, [ebp+control]
                movsx   ecx, byte ptr [eax]
                and     ecx, 7
                mov     eax, 1
                shl     eax, cl
                movzx   ecx, [ebp+edx+map]
                or      ecx, eax
                mov     edx, [ebp+control]
                movsx   eax, byte ptr [edx]
                sar     eax, 3
                mov     [ebp+eax+map], cl
                mov     eax, [ebp+control]
                add     eax, 1
                mov     [ebp+control], eax
                jmp     short loc_40103E
; ---------------------------------------------------------------------------

loc_401080                             ; CODE XREF strspn(char ,char )+46j
                mov     eax, [ebp+string]
                movsx   ecx, byte ptr [eax]
                test    ecx, ecx
                jz      short loc_4010C5

loc_40108A                             ; CODE XREF strspn(char ,char )+BEj
                mov     eax, [ebp+string]
                movsx   ecx, byte ptr [eax]
                sar     ecx, 3
                movzx   edx, [ebp+ecx+map]
                mov     eax, [ebp+string]
                movsx   ecx, byte ptr [eax]
                and     ecx, 7
                mov     eax, 1
                shl     eax, cl
                and     edx, eax
                jz      short loc_4010C0
                mov     eax, [ebp+count]
                add     eax, 1
                mov     [ebp+count], eax
                mov     eax, [ebp+string]
                add     eax, 1
                mov     [ebp+string], eax
                jmp     short loc_40108A
; ---------------------------------------------------------------------------

loc_4010C0                             ; CODE XREF strspn(char ,char )+AAj
                mov     eax, [ebp+count]
                jmp     short loc_4010C7
; ---------------------------------------------------------------------------

loc_4010C5                             ; CODE XREF strspn(char ,char )+88j
                xor     eax, eax

loc_4010C7                             ; CODE XREF strspn(char ,char )+C3j
                pop     edi
                pop     esi
                pop     ebx
                mov     esp, ebp
                pop     ebp
                retn
strspn@@YAHPAD0@Z endp